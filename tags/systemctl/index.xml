<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Systemctl on LeeCQ小空间</title><link>https://blog-g.leecq.cn/tags/systemctl/</link><description>Recent content in Systemctl on LeeCQ小空间</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 09 Sep 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://blog-g.leecq.cn/tags/systemctl/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux系统守护进程管理器</title><link>https://blog-g.leecq.cn/p/linux%E7%B3%BB%E7%BB%9F%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E5%99%A8/</link><pubDate>Mon, 09 Sep 2024 00:00:00 +0000</pubDate><guid>https://blog-g.leecq.cn/p/linux%E7%B3%BB%E7%BB%9F%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E5%99%A8/</guid><description>&lt;p&gt;systemd 是一个系统和服务管理器，它是许多现代Linux发行版（如Fedora、Red Hat Enterprise Linux、Debian、Ubuntu等）中默认使用的初始化系统。systemd 提供了一种替代传统的SysV init系统的方法，旨在提高系统的启动速度和运行效率，并且提供了更为强大的服务管理和依赖关系处理机制。&lt;/p&gt;
&lt;h2 id="systemd的特点"&gt;systemd的特点
&lt;/h2&gt;&lt;p&gt;并发启动：systemd 支持并行启动服务，这意味着它可以在同一时间启动多个服务，而不是像传统init系统那样顺序启动。
依赖关系管理：它可以自动处理服务之间的依赖关系，确保当一个服务启动时，其依赖的服务也已经启动。
Socket激活：允许服务监听套接字，当有连接请求到达时自动启动服务。
设备挂载和挂载点激活：systemd 可以基于设备挂载状态来控制服务的启动。
统一的日志记录：通过journald，systemd 统一了系统日志记录方式，并且提供了比传统syslog更丰富的查询和过滤功能。
资源控制：可以对服务的资源使用（如CPU和内存）进行限制。
服务单元文件：systemd 使用.service、.socket、.timer等单元文件来描述服务、套接字和定时任务等。&lt;/p&gt;
&lt;h2 id="基本命令"&gt;基本命令
&lt;/h2&gt;&lt;p&gt;一些常用的systemd命令包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;systemctl list-unit-files&lt;/code&gt;：列出所有已知的单元文件。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl start &amp;lt;service&amp;gt;&lt;/code&gt;：启动指定的服务。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl stop &amp;lt;service&amp;gt;&lt;/code&gt;：停止指定的服务。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl restart &amp;lt;service&amp;gt;&lt;/code&gt;：重启指定的服务。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl status &amp;lt;service&amp;gt;&lt;/code&gt;：查看指定服务的状态。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl enable &amp;lt;service&amp;gt;&lt;/code&gt;：使服务开机自启。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl disable &amp;lt;service&amp;gt;&lt;/code&gt;：禁止服务开机自启。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;systemctl daemon-reload&lt;/code&gt;：重新加载systemd配置。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;journalctl&lt;/code&gt;：查看系统日志。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="单元文件示例"&gt;单元文件示例
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;The Nginx HTTP Server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;After&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;network.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;User&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;nginx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;group&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;nginx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/sbin/nginx&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;RestartSec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;10s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;forking&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;PIDFile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/run/nginx.pid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>