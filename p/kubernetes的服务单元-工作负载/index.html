<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="åœ¨Kubernetesä¸­ï¼Œå·¥ä½œè´Ÿè½½ï¼ˆWorkloadsï¼‰æ˜¯æŒ‡ä¸€ç»„ç”¨äºç®¡ç† Pod çš„æ§åˆ¶å™¨ã€‚è¿™äº›æ§åˆ¶å™¨ç¡®ä¿é›†ç¾¤ä¸­çš„ Pod å¤„äºæœŸæœ›çš„çŠ¶æ€ã€‚"><title>Kubernetesçš„æœåŠ¡å•å…ƒ - å·¥ä½œè´Ÿè½½</title><link rel=canonical href=https://blog-g.leecq.cn/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Kubernetesçš„æœåŠ¡å•å…ƒ - å·¥ä½œè´Ÿè½½"><meta property='og:description' content="åœ¨Kubernetesä¸­ï¼Œå·¥ä½œè´Ÿè½½ï¼ˆWorkloadsï¼‰æ˜¯æŒ‡ä¸€ç»„ç”¨äºç®¡ç† Pod çš„æ§åˆ¶å™¨ã€‚è¿™äº›æ§åˆ¶å™¨ç¡®ä¿é›†ç¾¤ä¸­çš„ Pod å¤„äºæœŸæœ›çš„çŠ¶æ€ã€‚"><meta property='og:url' content='https://blog-g.leecq.cn/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/'><meta property='og:site_name' content='LeeCQå°ç©ºé—´'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='K8s'><meta property='article:tag' content='Kubernetes'><meta property='article:tag' content='è¿ç»´'><meta property='article:tag' content='Workloads'><meta property='article:tag' content='ç”Ÿå‘½å‘¨æœŸ'><meta property='article:published_time' content='2024-08-05T00:00:00+00:00'><meta property='article:modified_time' content='2024-08-05T00:00:00+00:00'><meta name=twitter:title content="Kubernetesçš„æœåŠ¡å•å…ƒ - å·¥ä½œè´Ÿè½½"><meta name=twitter:description content="åœ¨Kubernetesä¸­ï¼Œå·¥ä½œè´Ÿè½½ï¼ˆWorkloadsï¼‰æ˜¯æŒ‡ä¸€ç»„ç”¨äºç®¡ç† Pod çš„æ§åˆ¶å™¨ã€‚è¿™äº›æ§åˆ¶å™¨ç¡®ä¿é›†ç¾¤ä¸­çš„ Pod å¤„äºæœŸæœ›çš„çŠ¶æ€ã€‚"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_f509edb42ecc0ebd.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>LeeCQå°ç©ºé—´</a></h1><h2 class=site-description>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2></div></header><ol class=menu-social><li><a href=https://github.com/Lee-CQ/hugo-blog target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://leecq.cn target=_blank title=Home rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/tools/><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673.0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53.0l-.563-.187a1.993 1.993.0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z" clip-rule="evenodd"/></svg>
<span>Tools</span></a></li><li><a href=https://leecq.cn/ target=_blank><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>home</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#deployment>Deployment</a><ol><li><a href=#deployment---å‰¯æœ¬ç®¡ç†>Deployment - å‰¯æœ¬ç®¡ç†</a></li><li><a href=#deployment---æ»šåŠ¨æ›´æ–°>Deployment - æ»šåŠ¨æ›´æ–°</a><ol><li><a href=#æ“ä½œå‘½ä»¤>æ“ä½œå‘½ä»¤</a></li></ol></li></ol></li><li><a href=#statefulset>StatefulSet</a><ol><li><a href=#statefulset-çš„ç‰¹ç‚¹>StatefulSet çš„ç‰¹ç‚¹</a></li><li><a href=#åˆ›å»ºhandlessæœåŠ¡>åˆ›å»ºHandlessæœåŠ¡</a></li><li><a href=#åˆ›å»º-statefulset>åˆ›å»º StatefulSet</a></li><li><a href=#å‰¯æœ¬ç®¡ç†>å‰¯æœ¬ç®¡ç†</a></li></ol></li><li><a href=#daemonset>DaemonSet</a><ol><li><a href=#æ“ä½œæ­¥éª¤>æ“ä½œæ­¥éª¤ï¼š</a></li></ol></li><li><a href=#job--cronjob>Job / CronJob</a></li><li><a href=#cronjob>CronJob</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/>Kubernetesçš„æœåŠ¡å•å…ƒ - å·¥ä½œè´Ÿè½½</a></h2><h3 class=article-subtitle>åœ¨Kubernetesä¸­ï¼Œå·¥ä½œè´Ÿè½½ï¼ˆWorkloadsï¼‰æ˜¯æŒ‡ä¸€ç»„ç”¨äºç®¡ç† Pod çš„æ§åˆ¶å™¨ã€‚è¿™äº›æ§åˆ¶å™¨ç¡®ä¿é›†ç¾¤ä¸­çš„ Pod å¤„äºæœŸæœ›çš„çŠ¶æ€ã€‚</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Aug 05, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è´Ÿè½½èµ„æºæ¥ç®¡ç†ä¸€ç»„Podsï¼Œé€šè¿‡é…ç½®Controlleræ¥ä¿è¯å¤„äºè¿è¡ŒçŠ¶æ€çš„Podä¸ªæ•°æ˜¯æ­£ç¡®çš„ï¼Œä¸”å…¶çŠ¶æ€ä¸æ‰€æŒ‡å®šçš„çŠ¶æ€ç›¸ä¸€è‡´ã€‚ä¸¤è€…é€šè¿‡label-selectorå’ŒowerReferenceç›¸å…³è”ï¼ŒPodé€šè¿‡å·¥ä½œè´Ÿè½½å®ç°åº”ç”¨çš„è¿ç»´ï¼Œå¦‚ä¼¸ç¼©ã€å‡çº§ç­‰ã€‚</p><p><strong>Kuberneteså†…ç½®çš„å·¥ä½œè´Ÿè½½æœ‰ï¼š</strong></p><ul><li>æ— çŠ¶æ€å·¥ä½œè´Ÿè½½ï¼šReplicaSetã€Deployment</li><li>æœ‰çŠ¶æ€å·¥ä½œè´Ÿè½½ï¼šStatefulSet</li><li>å®ˆæŠ¤è¿›ç¨‹å·¥ä½œè´Ÿè½½ï¼šDeamonSet</li><li>æ‰¹å¤„ç†å·¥ä½œè´Ÿè½½ï¼šJob/CronJob</li></ul><p><img src=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image.png width=642 height=369 srcset="/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image_hu_38359eceb3239ef7.png 480w, /p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image_hu_3314ee41e6838a66.png 1024w" loading=lazy alt=å·¥ä½œè´Ÿè½½é€‰æ‹©Pod class=gallery-image data-flex-grow=173 data-flex-basis=417px></p><h2 id=deployment>Deployment</h2><ul><li>ReplicaSetï¼šå‰¯æœ¬æ§åˆ¶å™¨ï¼Œç”¨äºç¡®ä¿Podçš„ä¸€å®šæ•°é‡çš„ä»½æ•°(replica)åœ¨è¿è¡Œï¼Œç”¨äºè§£å†³podçš„æ‰©å®¹å’Œç¼©å®¹é—®é¢˜ï¼Œé€šå¸¸ç”¨äºæ— çŠ¶æ€åº”ç”¨ã€‚</li><li>Deploymentï¼šé€šè¿‡â€œæ§åˆ¶å™¨æ¨¡å¼â€ï¼Œæ¥æ“ä½œReplicaSetå¯¹è±¡ï¼ˆè€Œéç›´æ¥æ“ä½œPodå¯¹è±¡ï¼‰çš„ä¸ªæ•°å’Œå±æ€§ï¼Œè¿›è€Œå®ç°â€œæ°´å¹³æ‰©å±•/ æ”¶ç¼©â€å’Œâ€œæ»šåŠ¨æ›´æ–°â€è¿™ä¸¤ä¸ªç¼–æ’åŠ¨ä½œã€‚</li></ul><p><img src=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-1.png width=548 height=509 srcset="/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-1_hu_acefaef65b383510.png 480w, /p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-1_hu_e0366e3795f8c4c7.png 1024w" loading=lazy alt=Deployment class=gallery-image data-flex-grow=107 data-flex-basis=258px></p><h3 id=deployment---å‰¯æœ¬ç®¡ç†>Deployment - å‰¯æœ¬ç®¡ç†</h3><p>æ‰©å®¹/ç¼©å®¹DeploymentæŒ‡å¢åŠ æˆ–å‡å°‘å®ƒçš„å‰¯æœ¬æ•°ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯æ›´æ–°å…¶yamlä¸­çš„replicaså­—æ®µã€‚</p><p>Deploymentçš„å‰¯æœ¬æœºåˆ¶æ˜¯é€šè¿‡ï¼ŒReplicaSetå®ç°çš„ã€‚è¿™ä¸€ç‚¹å¯é€šè¿‡æŸ¥çœ‹å¯¹åº”Podçš„ownerReferenceå­—æ®µæŸ¥çœ‹ï¼š</p><p>å¦‚æœç»™å®šå¦‚ä¸‹é…ç½®éƒ¨ç½²ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.7.9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æŸ¥è¯¢åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ kubectl get pods --output=yaml| grep ownerReferenceâ€“A 6 
</span></span><span class=line><span class=cl>ownerReferences:
</span></span><span class=line><span class=cl>  - apiVersion: apps/v1
</span></span><span class=line><span class=cl>    blockOwnerDeletion: true
</span></span><span class=line><span class=cl>    controller: true
</span></span><span class=line><span class=cl>    kind: ReplicaSet
</span></span><span class=line><span class=cl>    name: nginx-7848d4b86f
</span></span><span class=line><span class=cl>    uid: 2b3c788e-3b09-44bb-b0fb-0bd7f17ccfe8
</span></span></code></pre></td></tr></table></div></div><h3 id=deployment---æ»šåŠ¨æ›´æ–°>Deployment - æ»šåŠ¨æ›´æ–°</h3><p>æ»šåŠ¨æ›´æ–°å…è®¸é€šè¿‡ä½¿ç”¨æ–°çš„å®ä¾‹é€æ­¥æ›´æ–°Podå®ä¾‹ï¼Œé›¶åœæœºè¿›è¡ŒDeploymentæ›´æ–°ã€‚æ–°çš„Podå°†åœ¨å…·æœ‰å¯ç”¨èµ„æºçš„èŠ‚ç‚¹ä¸Šè¿›è¡Œè°ƒåº¦ã€‚</p><p>æ»šåŠ¨æ›´æ–°å…è®¸ä»¥ä¸‹æ“ä½œï¼š</p><ul><li>å°†åº”ç”¨ç¨‹åºä»ä¸€ä¸ªç¯å¢ƒæå‡åˆ°å¦ä¸€ä¸ªç¯å¢ƒï¼ˆé€šè¿‡å®¹å™¨é•œåƒæ›´æ–°ï¼‰ï¼›</li><li>å›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬ï¼›</li><li>æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜åº”ç”¨ç¨‹åºï¼Œæ— éœ€åœæœºã€‚</li></ul><h4 id=æ“ä½œå‘½ä»¤>æ“ä½œå‘½ä»¤</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>æ›´æ–°Deployement
</span></span><span class=line><span class=cl>$ kubectl edit deploy/nginx
</span></span><span class=line><span class=cl>$ kubectl set image deploy/nginxnginx=nginx:1.9.1
</span></span><span class=line><span class=cl>$ kubectl apply -f nginx.yaml
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æŸ¥çœ‹Deploymentæ»šåŠ¨æ›´æ–°æƒ…å†µ/å†å²ï¼š
</span></span><span class=line><span class=cl>$ kubectl rollout status deploy/nginx
</span></span><span class=line><span class=cl>$ kubectl rollout history deploy/nginx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å›æ»šï¼š
</span></span><span class=line><span class=cl>$ kubectl rollout undo deployment/nginx--to-revision=2
</span></span><span class=line><span class=cl>#ä¸æŒ‡å®šçš„è¯é»˜è®¤å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æš‚åœ/æ¢å¤ï¼š
</span></span><span class=line><span class=cl>$ kubectl rollout pause deployment/nginx
</span></span><span class=line><span class=cl>$ kubectl rollout resume deploy/nginx
</span></span></code></pre></td></tr></table></div></div><h2 id=statefulset>StatefulSet</h2><p>StatefulSet æ˜¯ Kubernetes ä¸­çš„ä¸€ç§å·¥ä½œè´Ÿè½½æ§åˆ¶å™¨ï¼Œä¸“é—¨ç”¨äºç®¡ç†æœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºã€‚ä¸æ— çŠ¶æ€çš„åº”ç”¨ç¨‹åºä¸åŒï¼Œæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºé€šå¸¸éœ€è¦æŒä¹…åŒ–çš„å­˜å‚¨å’Œç¨³å®šçš„èº«ä»½æ ‡è¯†ã€‚StatefulSet ä¸ºè¿™ç±»åº”ç”¨ç¨‹åºæä¾›äº†å¿…è¦çš„æ”¯æŒã€‚</p><p><img src=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-2.png width=1219 height=500 srcset="/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-2_hu_ab1a96de88bc136e.png 480w, /p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-2_hu_3b24df2c918387b8.png 1024w" loading=lazy alt="alt text" class=gallery-image data-flex-grow=243 data-flex-basis=585px></p><h3 id=statefulset-çš„ç‰¹ç‚¹>StatefulSet çš„ç‰¹ç‚¹</h3><ol><li><strong>ç¨³å®šçš„æŒä¹…åŒ–å­˜å‚¨:</strong> StatefulSet æ”¯æŒæ¯ä¸ª Pod ä¸ä¸€ä¸ªæˆ–å¤šä¸ªæŒä¹…å·ï¼ˆPersistent Volume, PVï¼‰ç›¸å…³è”ï¼Œè¿™æ ·æ¯ä¸ª Pod å°±æœ‰äº†è‡ªå·±ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ã€‚</li><li><strong>ç¨³å®šçš„ç½‘ç»œæ ‡è¯†:</strong> StatefulSet ä¸ºæ¯ä¸ª Pod åˆ†é…ä¸€ä¸ªç¨³å®šçš„ã€å”¯ä¸€çš„ç½‘ç»œæ ‡è¯†ç¬¦ï¼ˆé€šå¸¸æ˜¯ DNS åç§°æˆ–ä¸»æœºåï¼‰ã€‚è¿™æ„å‘³ç€ Pod åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æ‹¥æœ‰ç›¸åŒçš„åç§°ï¼Œå³ä½¿ Pod é‡å¯ä¹Ÿä¸ä¼šæ”¹å˜ã€‚</li><li><strong>æœ‰åºéƒ¨ç½²å’Œç¼©æ”¾:</strong> StatefulSet æ”¯æŒæœ‰åºçš„éƒ¨ç½²å’Œç¼©æ”¾æ“ä½œã€‚è¿™æ„å‘³ç€ Pod å¯ä»¥æŒ‰é¡ºåºéƒ¨ç½²æˆ–ç¼©æ”¾ï¼Œä¾‹å¦‚ä»åºå·æœ€å°çš„ Pod å¼€å§‹ã€‚</li><li><strong>æœ‰åºæ»šåŠ¨æ›´æ–°:</strong> StatefulSet æ”¯æŒæœ‰åºçš„æ»šåŠ¨æ›´æ–°ï¼Œå³ Pod çš„æ›´æ–°æŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿›è¡Œï¼Œç¡®ä¿æ›´æ–°è¿‡ç¨‹ä¸­åº”ç”¨ç¨‹åºçš„å¯ç”¨æ€§ã€‚</li><li><strong>Headless Service:</strong> StatefulSet é€šå¸¸ä¸ headless Service ç»“åˆä½¿ç”¨ï¼Œè¿™æ„å‘³ç€ Service ä¸ä¼šåˆ†é…ä¸€ä¸ª Cluster IPã€‚ç›¸åï¼ŒService ä¼šä¸ºæ¯ä¸ª Pod åˆ†é…ä¸€ä¸ª DNS è®°å½•ï¼Œè¿™æ ·æ¯ä¸ª Pod éƒ½å¯ä»¥é€šè¿‡è‡ªå·±çš„ DNS åç§°è¢«å…¶ä»–æœåŠ¡å‘ç°ã€‚</li></ol><h3 id=åˆ›å»ºhandlessæœåŠ¡>åˆ›å»ºHandlessæœåŠ¡</h3><p>åˆ›å»ºHeadlessæœåŠ¡éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>æœåŠ¡åç§°å’ŒStatefulSetä¸­çš„å®šä¹‰ä¸€è‡´ï¼›</li><li>é€‰æ‹©å™¨è¦æŒ‡å‘æ­£ç¡®çš„Podæ ‡ç­¾ï¼›</li><li>æŒ‡å®šclusterIPï¼šNoneã€‚</li></ul><p>åˆ›å»ºæ­¥éª¤ï¼š</p><ul><li>ç¼–è¾‘headless.yaml</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># headless.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w> </span><span class=c># å¯¹è±¡ç±»å‹ä¸ºService</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx# Podé—´é€šä¿¡çš„ç«¯å£åç§°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w> </span><span class=c># Podé—´é€šä¿¡çš„ç«¯å£å·</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w> </span><span class=c># é€‰æ‹©æ ‡ç­¾ä¸ºapp:nginxçš„Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>clusterIP</span><span class=p>:</span><span class=w> </span><span class=l>None</span><span class=w> </span><span class=c># å¿…é¡»è®¾ç½®ä¸ºNone</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li><p>åˆ›å»ºHeadless Serviceï¼š
<code>kubectl create -f headless.yaml</code></p></li><li><p>æŸ¥è¯¢Serviceï¼š</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl get svc
</span></span><span class=line><span class=cl>NAME    TYPE      CLUSTER-IP  EXTERNAL-IP   PORT(S)   AGE
</span></span><span class=line><span class=cl>nginx   ClusterIP None        &lt;none&gt;        80/TCP    5s
</span></span></code></pre></td></tr></table></div></div><h3 id=åˆ›å»º-statefulset>åˆ›å»º StatefulSet</h3><ul><li>åˆ›å»ºå¹¶ç¼–è¾‘yamlæ–‡ä»¶</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>serviceName</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>www</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/usr/share/nginx/html</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>volumeClaimTemplates</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>www</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>everest.io/disk-volume-type</span><span class=p>:</span><span class=w> </span><span class=l>SAS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>accessModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>ReadWriteOnce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>storage</span><span class=p>:</span><span class=w> </span><span class=l>1Gi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>storageClassName</span><span class=p>:</span><span class=w> </span><span class=l>csi-disk</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>åˆ›å»ºStatefulSet <code>kubectl apply -f web.yaml</code></li><li>åˆ›å»ºå®Œæˆåï¼Œå¯çœ‹åˆ°Podåç§°æŒ‰åºå·æ’åºï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>kubectl get pod
</span></span><span class=line><span class=cl>NAME    READY   STATUS    RESTARTS  AGE
</span></span><span class=line><span class=cl>web-0   1/1     Running   0         5m28s
</span></span><span class=line><span class=cl>web-1   1/1     Running   0         5m21s
</span></span><span class=line><span class=cl>web-2   1/1     Running   0         4m56s
</span></span></code></pre></td></tr></table></div></div><ul><li>åå°å·²åˆ›å»ºä¸‰ä¸ªPVCï¼Œåç§°ç›¸åŒï¼Œä»¥åºå·æ’åºï¼Œä¾æ¬¡å’ŒPVåšç»‘å®šï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NAME        STATUS  VOLUME  CAPACITY  ACCESS  MODES STORAGECLASS  AGE
</span></span><span class=line><span class=cl>stor-web-0  Bound   myPV1   1Gi       RWO     my-sc               65s
</span></span><span class=line><span class=cl>stor-web-1  Bound   myPV2   1Gi       RWO     my-sc               58s
</span></span><span class=line><span class=cl>stor-web-2  Bound   myPV3   1Gi       RWO     my-sc               33s
</span></span></code></pre></td></tr></table></div></div><ul><li>ä½¿ç”¨nslookupæŸ¥çœ‹DNSè®°å½•ï¼Œå¯ä»¥çœ‹åˆ°å¯¹è¯¥æœåŠ¡çš„è®¿é—®ç›´æ¥æŒ‡å‘Podï¼š</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Name: nginx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Address 1: 10.244.1.99 web-2.nginx.default.svc.cluster.local
</span></span><span class=line><span class=cl>Address 2: 10.244.2.120 web-0.nginx.default.svc.cluster.local
</span></span><span class=line><span class=cl>Address 3: 10.244.0.25 web-1.nginx.default.svc.cluster.local
</span></span></code></pre></td></tr></table></div></div><h3 id=å‰¯æœ¬ç®¡ç†>å‰¯æœ¬ç®¡ç†</h3><p>æ‰©å®¹/ç¼©å®¹StatefulSetæŒ‡å¢åŠ æˆ–å‡å°‘å®ƒçš„å‰¯æœ¬æ•°ã€‚è¿™å¯ä»¥é€šè¿‡æ›´æ–°replicaså­—æ®µå®Œæˆã€‚</p><p>å½“ç¼©å®¹StatefulSetæ—¶ï¼Œå¯ä»¥çœ‹åˆ°Podåœæ­¢çš„é¡ºåºä¸ºä»åºå·æœ€é«˜çš„å¼€å§‹é™åºç»ˆæ­¢ï¼Œå¹¶ä¸”åªæœ‰åœ¨å‰ä¸€ä¸ªpodè¢«å®Œå…¨ç»ˆæ­¢åï¼Œä¸‹ä¸€ä¸ªæ‰å¼€å§‹ç»ˆæ­¢ã€‚å‡çº§æ—¶ï¼Œä¹Ÿæ˜¯ä»¥ç›¸åŒé¡ºåºå¤„ç†ã€‚</p><p>StatefulSetçš„å‰¯æœ¬ç®¡ç†ç”±StatefulSetæ§åˆ¶å™¨å®ç°çš„ã€‚è¿™ä¸€ç‚¹å¯é€šè¿‡æŸ¥çœ‹å¯¹åº”Podçš„ownerReferenceå­—æ®µæŸ¥çœ‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>ownerReferences</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>blockOwnerDeletion</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>controller</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w> </span><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>StatefulSet</span><span class=w> </span><span class=c>#</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>web</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class=l>0230cddd-5746-4f20-82c5-25253180975e</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=daemonset>DaemonSet</h2><p>DaemonSetï¼ˆå®ˆæŠ¤è¿›ç¨‹é›†ï¼‰éƒ¨ç½²çš„å‰¯æœ¬Podä¼šåˆ†å¸ƒåœ¨å„ä¸ªNodeä¸Šã€‚å®ƒå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>ç¡®ä¿æ¯ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…æœŸæœ›çš„èŠ‚ç‚¹ï¼ˆé€šè¿‡nodeSelectorå®ç°ï¼‰ä¸Šè¿è¡Œä¸€ä¸ªPodï¼›</li><li>æ–°å¢èŠ‚ç‚¹æ—¶è‡ªåŠ¨éƒ¨ç½²ä¸€ä¸ªPodï¼›</li><li>ç§»é™¤èŠ‚ç‚¹æ—¶è‡ªåŠ¨åˆ é™¤Podã€‚</li></ul><p><img src=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-3.png width=401 height=170 srcset="/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-3_hu_764e08dc6164383c.png 480w, /p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%8D%95%E5%85%83-%E5%B7%A5%E4%BD%9C%E8%B4%9F%E8%BD%BD/image-3_hu_c9ed9795309014b.png 1024w" loading=lazy alt=å®ˆæŠ¤è¿›ç¨‹é›† class=gallery-image data-flex-grow=235 data-flex-basis=566px></p><p>é€šè¿‡yamlåˆ›å»ºDaemonSetçš„æ–¹å¼ä¸åˆ›å»ºDeploymentçš„æ–¹å¼ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><ul><li>kindé€‰æ‹©DeamonSetï¼›</li><li>ä¸éœ€è¦è§„å®šreplicasé¡¹ã€‚</li></ul><h3 id=æ“ä½œæ­¥éª¤>æ“ä½œæ­¥éª¤ï¼š</h3><ul><li>åˆ›å»ºYaml</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>app/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>DaemonSet</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx-daemonset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>nginx:1.7.9</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>åº”ç”¨é…ç½®æ–‡ä»¶ <code>kubectl apply -f daemonset.yaml</code></li><li>æŸ¥çœ‹åˆ›å»ºçš„Pod <code>kubectl get pod -o wide</code></li><li>å¦‚æœå°†ä¸€ä¸ªPodä»Nodeä¸Šåˆ é™¤ï¼Œä¼šè‡ªåŠ¨é‡å¯ä¸€ä¸ªæ–°çš„</li><li>å½“Kubernetesçš„Nodeå‡ºç°æ•…éšœæ—¶ï¼Œç›¸åº”çš„Podä¹Ÿå°†è¢«ç§»é™¤ï¼Œä¸ä¼šåœ¨å…¶ä»–çš„èŠ‚ç‚¹ä¸Šå¯åŠ¨æ–°çš„Podã€‚</li></ul><h2 id=job--cronjob>Job / CronJob</h2><p>Jobä¸»è¦å¤„ç†ä¸€äº›çŸ­æš‚çš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œä»»åŠ¡ç»“æŸåèµ„æºé‡Šæ”¾ï¼Œä¸éœ€è¦ä¿è¯åº”ç”¨å¾—å®æ—¶å¯ç”¨ã€‚</p><p>Jobæ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡ï¼š</p><ul><li>kindï¼šé€‰æ‹©Jobã€‚</li><li>completionsï¼šå½“å‰çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œçš„Podæ•°é‡ã€‚</li><li>parallelismï¼šè¡¨ç¤ºæœ€å¤šæœ‰å¤šå°‘ä¸ªå¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li>restartPolicyï¼šåªèƒ½é€‰æ‹©Neveræˆ–OnFailureã€‚</li><li>backoffLimitï¼šå‚æ•°æŒ‡å®šjobå¤±è´¥åè¿›è¡Œé‡è¯•çš„æ¬¡æ•°ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>batch/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>completions</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>parallelism</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backoffLimit</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w> </span><span class=c>#Pod æ¨¡æ¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>perl:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;perl&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-Mbignum=bpi&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-wle&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;print bpi(200)&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>onFailure</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>åº”ç”¨ä¸Šè¿°YAML <code>kubectl apply -f job.yaml</code></li><li>æŸ¥çœ‹Job <code>kubectl get job</code></li><li>å½“è¿è¡Œç»“æŸåJobä¼šè‡ªåŠ¨è¢«åœæ­¢å¹¶æ¸…ç†ã€‚</li></ul><h2 id=cronjob>CronJob</h2><p>CronJobæ˜¯ä¸€ç§ç‰¹æ®Šçš„Jobï¼Œä¸»è¦å¤„ç†å‘¨æœŸæ€§æˆ–è€…é‡å¤æ€§çš„ä»»åŠ¡ã€‚</p><p>CronJobæ˜¯ä¸€ç§ç‰¹æ®Šçš„Jobï¼Œå®ƒèƒ½å¤ŸæŒ‰ç…§æ—¶é—´å¯¹ä»»åŠ¡è¿›è¡Œè°ƒåº¦ï¼Œä¸æˆ‘ä»¬ç†Ÿæ‚‰çš„crontabéå¸¸ç›¸ä¼¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Cronæ ¼å¼å¿«é€ŸæŒ‡å®šä»»åŠ¡çš„è°ƒåº¦æ—¶é—´ï¼š</p><ul><li>åœ¨ç»™å®šæ—¶é—´ç‚¹åªè¿è¡Œä¸€æ¬¡ï¼›</li><li>åœ¨ç»™å®šæ—¶é—´ç‚¹å‘¨æœŸæ€§åœ°è¿è¡Œã€‚</li></ul><p>Scheduleæ ¼å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ä¸Linux Crontab çš„è¯­æ³•ä¸€è‡´ã€‚
</span></span><span class=line><span class=cl>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ† (0 - 59)
</span></span><span class=line><span class=cl>â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¶ (0 - 23)
</span></span><span class=line><span class=cl>â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆä¸­çš„å¤© (1 - 31)
</span></span><span class=line><span class=cl>â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆä»½ (1 - 12)
</span></span><span class=line><span class=cl>â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å‘¨å‡  (0 - 6) (å‘¨æ—¥å¼€å§‹ï¼Œéƒ¨åˆ†ç³»ç»Ÿä¸­7æ˜¯å‘¨æ—¥)
</span></span><span class=line><span class=cl>â”‚ â”‚ â”‚ â”‚ â”‚ 
</span></span><span class=line><span class=cl>â”‚ â”‚ â”‚ â”‚ â”‚
</span></span><span class=line><span class=cl>â”‚ â”‚ â”‚ â”‚ â”‚
</span></span><span class=line><span class=cl>* * * * *
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>batch/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;*/1 * * * *&#34;</span><span class=w> </span><span class=c># ä¸Corndçš„è¯­æ³•ä¿æŒä¸€è‡´</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jobTemplate</span><span class=p>:</span><span class=w>  </span><span class=c># Jobæ¨¡æ¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>completions</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>parallelism</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>backoffLimit</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>spec</span><span class=p>:</span><span class=w>  </span><span class=c># Podæ¨¡æ¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>pi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>perl:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;perl&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-Mbignum=bpi&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-wle&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;print bpi(200)&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>onFailure</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>æ ¹æ®yamlåˆ›å»ºCronJobå¯¹è±¡ä¹‹åï¼Œæ¯åˆ†é’Ÿéƒ½ä¼šåˆ›å»ºæ–°çš„Jobå¯¹è±¡ï¼Œæ‰€æœ‰çš„CronJobåˆ›å»ºçš„ä»»åŠ¡éƒ½ä¼šå¸¦æœ‰è°ƒåº¦æ—¶çš„æ—¶é—´æˆ³ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ kubectlget cronjob--watch
</span></span><span class=line><span class=cl>NAME  SCHEDULE    SUSPEND ACTIVE LAST SCHEDULE AGE
</span></span><span class=line><span class=cl>pi    */1 * * * * False   0       &lt;none&gt;       3s
</span></span><span class=line><span class=cl>pi    */1 * * * * False   1       1s           7s
</span></span><span class=line><span class=cl>$ kubectlget job --watch
</span></span><span class=line><span class=cl>NAME          COMPLETIONS DURATION AGE
</span></span><span class=line><span class=cl>pi-1551660600 0/3         0s       0s
</span></span><span class=line><span class=cl>pi-1551660600 1/3         16s       16s
</span></span><span class=line><span class=cl>pi-1551660600 2/3         31s       31s
</span></span><span class=line><span class=cl>pi-1551660600 3/3         44s       44s
</span></span><span class=line><span class=cl>pi-1551660660 0/3         1s
</span></span><span class=line><span class=cl>pi-1551660660 0/3         1s        1s
</span></span><span class=line><span class=cl>pi-1551660660 1/3         14s       14s
</span></span><span class=line><span class=cl>pi-1551660660 2/3         28s       28s
</span></span><span class=line><span class=cl>pi-1551660660 3/3         42s       43s
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/k8s/>K8s</a>
<a href=/tags/kubernetes/>Kubernetes</a>
<a href=/tags/%E8%BF%90%E7%BB%B4/>è¿ç»´</a>
<a href=/tags/workloads/>Workloads</a>
<a href=/tags/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/>ç”Ÿå‘½å‘¨æœŸ</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/kubernetes%E7%9A%84%E6%A0%B8%E5%BF%83-pod/><div class=article-details><h2 class=article-title>Kubernetesçš„æ ¸å¿ƒ - Pod</h2></div></a></article><article><a href=/p/kubernetes%E7%9A%84%E5%AD%98%E5%82%A8/><div class=article-details><h2 class=article-title>Kubernetesçš„å­˜å‚¨</h2></div></a></article><article><a href=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE-ingress/><div class=article-details><h2 class=article-title>Kubernetesçš„æœåŠ¡è®¿é—®-Ingress</h2></div></a></article><article><a href=/p/kubernetes%E7%9A%84%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE-service/><div class=article-details><h2 class=article-title>Kubernetesçš„æœåŠ¡è®¿é—®-Service</h2></div></a></article><article><a href=/p/kubernetes%E7%9A%84%E9%85%8D%E7%BD%AE%E6%9E%B6%E6%9E%84/><div class=article-details><h2 class=article-title>Kubernetesçš„é…ç½®æ¶æ„</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=lee-cq/hugo-blog data-repo-id=R_kgDOHhaNdw data-category=Announcements data-category-id=DIC_kwDOHhaNd84CQtzr data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 LeeCQå°ç©ºé—´</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>